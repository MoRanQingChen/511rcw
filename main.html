<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<link href="css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="css/job.css" />
		<style>
			ul {
				font-size: 14px;
				http: //127.0.0.1:8020/app/main.html#
				color: #8f8f94;
			}
			
			.mui-btn {
				padding: 10px;
				http: //127.0.0.1:8020/app/main.html#
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav" style="padding-right: 15px;">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">511人才网</h1>
			<button class=" mui-pull-right mui-btn-link"><a href="login.html">登陆</a></button>
		</header>

		<div class="mui-content">
			<div class="mui-input-row mui-search" style="margin-left: 5%;margin-top: 15px; width: 70%;float: left;">
				<input type="search" class="mui-input-clear" placeholder="请输入职位名" id="sousuokuang">
			</div>
			<button id="sousuo" type="button" class="mui-btn mui-btn-primary mui-icon mui-icon-search" style="height:34px;float: left;width: 20%;margin-top: 15px">
		            搜索
		        </button>

			<div id="slider" class="mui-slider">
				<div class="mui-slider-group mui-slider-loop">
					<div class="mui-slider-item mui-slider-item-duplicate">
						<a href="#"><img src="images/baner/baner2.png"></a>
					</div>
					<div class="mui-slider-item">
						<a href="#"><img src="images/baner/baner3.png"></a>
					</div>
					<div class="mui-slider-item">
						<a href="#"><img src="images/baner/baner4.png"></a>
					</div>
					<div class="mui-slider-item">
						<a href="#"><img src="images/baner/baner5.png"></a>
					</div>
					<div class="mui-slider-item">
						<a href="#"><img src="images/baner/baner2.png"></a>
					</div>
					<div class="mui-slider-item mui-slider-item-duplicate">
						<a href="#"><img src="images/baner/baner3.png"></a>
					</div>
				</div>
				<div class="mui-slider-indicator">
					<div class="mui-indicator mui-active22"></div>
					<div class="mui-indicator"></div>
					<div class="mui-indicator"></div>
					<div class="mui-indicator"></div>
				</div>
			</div>
		</div>
		</div>
		</div>

		<ul class="mui-table-view mui-grid-view" style="padding: 0;">
			<li class="mui-table-view-cell mui-media mui-col-xs-6" style="border-right: 1px solid #DDD;" id="shoucang">
				<a href="#">
					<div class="mui-media-body " style="height: 40px;">
						我的收藏<span class="mui-icon mui-icon-star"></span>
					</div>
				</a>
			</li>
			<li class="mui-table-view-cell mui-media mui-col-xs-6 " id="jianliguanli">
				<a href="#">
					<div class="mui-media-body" style="height: 40px;">
						简历管理<span class="mui-icon mui-icon-compose"></span>
					</div>
				</a>
			</li>
			<li class="mui-table-view-cell mui-media mui-col-xs-6" id="jianlifankui">
				<a href="#" style="border-right: 1px solid #DDD;border-top: 1px solid #DDD;">
					<div class="mui-media-body" style="height: 40px;">
						简历反馈<span class="mui-icon mui-icon-personadd"></span>
					</div>
				</a>
			</li>
			<li class="mui-table-view-cell mui-media mui-col-xs-6 weikai">
				<a href="#" style="border-top: 1px solid #DDD;">

					<div class="mui-media-body" style="height: 40px;">
						职场充电<span class="mui-icon mui-icon-spinner"></span>
					</div>
				</a>
			</li>
		</ul>
		<h4>您可能感兴趣的职位：</h4>
		<ul id="jobs" class="mui-table-view">

		</ul>

		<h4>职场正能量</h4>

		<div style="margin-bottom: 50px;">
			<p style="font-size: 12px;">511人才网</p>
		</div>
		<nav class="mui-bar mui-bar-tab">
			<a class="mui-tab-item mui-active2" href="#" id="nav-home">
				<span class="mui-icon mui-icon-home"></span>
				<span class="mui-tab-label">首页</span>
			</a>
			<a class="mui-tab-item" href="#" id="nav-job">
				<span class="mui-icon mui-icon-contact "></span>
				<span class="mui-tab-label ">职位</span>
			</a>
			<a class="mui-tab-item " href="#" id="nav-message">
				<span class="mui-icon mui-icon-chat"></span>
				<span class="mui-tab-label">消息</span>
			</a>
			<a class="mui-tab-item" href="#" id="nav-setting">
				<span class="mui-icon mui-icon-gear "></span>
				<span class="mui-tab-label ">设置</span>
			</a>
		</nav>
		<script src="js/mui.min.js "></script>
		<script src="js/app.js "></script>
		<script src="js/allHave.js"></script>
		<script src="js/ajax.js" type="text/javascript" charset="utf-8"></script>
		<script>
			function getCookie() {
				var coo = plus.navigator.getCookie('id');
			}

			function openJianli() {
				mui.openWindow({
					url: 'jianli.html',
					id: 'jianli'
				})
			}
			//----------------------------------------------------------------------推荐职位
			jp("http://www.511rcw.com/app/AppHandler.ashx", {
				t: 26
			}, function(a, JSONdata) {
				var flag = document.createDocumentFragment();
				for (var i in JSONdata) {
					var arr = JSONdata[i].split('|$|');
					arr[5] = arr[5] ? 'http://www.511rcw.com/' + arr[5] : 'images/job/logo.png';
					var oLi = document.createElement("li");
					oLi.className = "mui-table-view-cell mui-media";
					oLi.innerHTML = "<a href='#'>" +
						"<img class='mui-media-object mui-pull-left' src='" + arr[5] + "'>" +
						"<div class='mui-media-body'>" +
						arr[1] +
						"<span id='value'>" + arr[2] + "</span>" +
						"<p class='mui-ellipsis'>" + arr[4] +
						"</br><span id='address'>" + arr[3] + "</span>" +
						"</p>" +
						"</div>" +
						"</a>";
					flag.appendChild(oLi);;
					(function(i) {
						oLi.addEventListener('tap', function() {
							plus.nativeUI.showWaiting()
							mui.openWindow('jobInfo.html', i)
						})
					})(arr[0]);
				}
				document.getElementById("jobs").appendChild(flag);
			});
			(function($, doc) {
				$.init();
				var settings = app.getSettings();
				var account = doc.getElementById('account');
				//
				window.addEventListener('show', function() {
					var state = app.getState();
					account.innerText = state.account;
				}, false);
				$.plusReady(function() {
					$.oldBack = mui.back;
					var backButtonPress = 0;
					$.back = function(event) {
						backButtonPress++;
						if (backButtonPress > 1) {
							plus.runtime.quit();
						} else {
							plus.nativeUI.toast('再按一次退出应用');
						}
						setTimeout(function() {
							backButtonPress = 0;
						}, 1000);
						return false;
					};
				});
				//------------------------------------------------暂未开放
				var weikai = document.getElementsByClassName('weikai');
				for (var i = 0; i < weikai.length; i++) {
					weikai[i].addEventListener('tap', function() {
						alert('该功能暂未开放，敬请期待');
					})
				}
				//------------------------------------------------简历管理
				var jianliguanli = document.getElementById("jianliguanli");
				jianliguanli.addEventListener('tap', a(function() {
						$.openWindow({
							url: 'resumeList.html'
						})
					}))
					//------------------------------------------------------------
				document.getElementById("jianlifankui").addEventListener('tap', a(function() {
					$.openWindow({
						url: 'toudifankui.html'
					})
				}));
				document.getElementById("shoucang").addEventListener('tap', a(function() {
						$.openWindow('wodeshoucang.html')
					}))
					//-----------------------------------------------------------
				function a(b) {
					return function() {
						var coo = plus.navigator.getCookie('id');
						if (coo) {
							http: //127.0.0.1:8020/app/main.html#
								plus.nativeUI.showWaiting();
							b();
						}
						else {
							var btnArray = ['取消', '登陆'];
							mui.confirm('您还未登陆，是否立即登陆？', '511人才网', btnArray, function(e) {
								if (e.index == 1) {
									$.openWindow({
										url: 'login.html'
									})
								}
							})
						}
					}
				}
				//----------------------------------------------------------------
				document.getElementById("sousuo").addEventListener('tap', function() {
					plus.nativeUI.showWaiting()
					mui.openWindow({
						url: 'job.html',
						id: document.getElementById("sousuokuang").value
					});
				})
			}(mui, document));
		</script>

		<script type="text/javascript">
			var wgtVer = null;
			function plusReady() {
				// Android处理返回键
				plus.key.addEventListener('backbutton', function() {
					if (confirm('确认退出？')) {
						plus.runtime.quit();
					}
				}, false);
				// 获取本地应用资源版本号
				plus.runtime.getProperty(plus.runtime.appid, function(inf) {
					wgtVer = inf.version;
					console.log("当前应用版本：" + wgtVer);
				});
			}
			if (window.plus) {
				plusReady();
			} else {
				document.addEventListener('plusready', plusReady, false);
			}
			// 检测更新
			var checkUrl = "http://demo.dcloud.net.cn/test/update/check.php";

			function checkUpdate() {
				plus.nativeUI.showWaiting("检测更新...");
				var xhr = new XMLHttpRequest();
				xhr.onreadystatechange = function() {
					switch (xhr.readyState) {
						case 4:
							plus.nativeUI.closeWaiting();
							if (xhr.status == 200) {
								console.log("检测更新成功：" + xhr.responseText);
								var newVer = xhr.responseText;
								if (wgtVer && newVer && (wgtVer != newVer)) {
									downWgt(); // 下载升级包
								} else {
									plus.nativeUI.alert("无新版本可更新！");
								}
							} else {
								console.log("检测更新失败！");
								plus.nativeUI.alert("检测更新失败！");
							}
							break;
						default:
							break;
					}
				}
				xhr.open('GET', checkUrl);
				xhr.send();
			}
			// 下载wgt文件
			var wgtUrl = "http://demo.dcloud.net.cn/test/update/H5EF3C469.wgt";

			function downWgt() {
				plus.nativeUI.showWaiting("下载wgt文件...");
				plus.downloader.createDownload(wgtUrl, {
					filename: "_doc/update/"
				}, function(d, status) {
					if (status == 200) {
						console.log("下载wgt成功：" + d.filename);
						installWgt(d.filename); // 安装wgt包
					} else {
						console.log("下载wgt失败！");
						plus.nativeUI.alert("下载wgt失败！");
					}
					plus.nativeUI.closeWaiting();
				}).start();
			}
			// 更新应用资源
			function installWgt(path) {
				plus.nativeUI.showWaiting("安装wgt文件...");
				plus.runtime.install(path, {}, function() {
					plus.nativeUI.closeWaiting();
					console.log("安装wgt文件成功！");
					plus.nativeUI.alert("应用资源更新完成！", function() {
						plus.runtime.restart();
					});
				}, function(e) {
					plus.nativeUI.closeWaiting();
					console.log("安装wgt文件失败[" + e.code + "]：" + e.message);
					plus.nativeUI.alert("安装wgt文件失败[" + e.code + "]：" + e.message);
				});
			}
		</script>

	</body>

</html>