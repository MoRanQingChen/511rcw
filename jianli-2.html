<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<link href="css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="css/job.css" />
		<link href="css/mui.picker.css" rel="stylesheet" />
		<link href="css/mui.poppicker.css" rel="stylesheet" />
		<style>
			ul {
				font-size: 14px;
				color: #8f8f94;
			}
			
			.mui-btn {
				padding: 10px;
				http: //127.0.0.1:8020/app/main.html#
			}
			
			#mengban {
				width: 100%;
				height: 100%;
				background-color: rgba(0, 0, 0, .2);
				position: fixed;
				z-index: 998;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav" style="padding-right: 15px;">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">我的简历</h1>
		</header>
		<div id="mengban" style="display: none;">

		</div>
		<div class="mui-content">
			<br /> 二：求职意向
			<br />
			<br />
			<form class="mui-input-group">
				<div class="mui-input-row">
					<label>近期岗位：</label>
					<input type="text" placeholder="若无工作经验可忽略" id="RecuetlyPost">
				</div>
				<div class="mui-input-row" id="xingzhi">
					<label>期望性质<span style="color: red;">*</span>：</label>
					<input type="text" placeholder="请选择期望工作性质" id="HopeType">
				</div>
				<div class="mui-input-row" id="diqu">
					<label>期望地区<span style="color: red;">*</span>：</label>
					<input type="text" placeholder="请选择期望工作地区" id="HopeZone">
				</div>
				<div class="mui-input-row" id="yuexin">
					<label>期望月薪<span style="color: red;">*</span>：</label>
					<input type="text" placeholder="请选择期望月薪" id="HopeMonthFee">
				</div>
				<div class="mui-input-row" id="zhiwei">
					<label>求职意向<span style="color: red;">*</span>：</label>
					<input type="text" readonly="true" placeholder="请选择求职意向" id="yixiang">
				</div>

			</form>

			<br /> 三：技能特长
			<br />
			<br />

			<div class="mui-input-row" style="margin:0px;margin-top: -10px;">
				<textarea rows="5" placeholder="请您对自己做一个简短说明，简明扼要地描述您的职业优势，让用人单位快速地了解您！" id="ContentsSkill"></textarea>
			</div>
			<!--			<button class="mui-btn mui-btn-primary" onclick="return false;" style="float: left; margin-left: 20px;height: 35px;line-height: 15px;">继续添加经历</button>
--><button id="reg1" class="mui-btn mui-btn-primary" style="float: right; margin-right: 20px;height: 35px;line-height: 15px;margin-bottom: 10px;">保存并下一步</button>&nbsp;&nbsp;

		</div>
		<div class="mui-content">

		</div>
		<script src="js/mui.min.js "></script>
		<script src="js/app.js "></script>
		<script src="js/city.data-3.js" type="text/javascript" charset="utf-8"></script>
		<script src="./js/mui.picker.js"></script>
		<script src="./js/mui.poppicker.js"></script>
		<script src="./js/ajax.js"></script>
		<script src="js/zhiwei.js" type="text/javascript" charset="utf-8"></script>
		<!--<script src="../js/mui.picker.min.js"></script>-->

		<script>
			(function($, doc) {
				$.init();
				mui('body').on('shown', '.mui-popover', function(e) {
					//console.log('shown', e.detail.id);//detail为当前popover元素
				});
				mui('body').on('hidden', '.mui-popover', function(e) {
					//console.log('hidden', e.detail.id);//detail为当前popover元素
				});
				//---------------------------------------------------------------------------------
				//----------------------------------------------------------------------------------------
				document.getElementById("xingzhi").addEventListener('tap', function() {
					var btnArray = [{
						title: "全职"
					}, {
						title: "兼职"
					}];
					plus.nativeUI.actionSheet({
						title: "期望工作性质",
						cancel: "取消",
						buttons: btnArray
					}, function(e) {
						var index = e.index;
						var text = "";
						switch (index) {
							case 0:
								break;
							case 1:
								text += "全职";
								break;
							case 2:
								text += "兼职";
								break;
						}
						document.getElementById("xingzhi").getElementsByTagName('input')[0].value = text;
					});
				});
				document.getElementById("yuexin").addEventListener('tap', function() {
					var btnArray = [{
						title: "面议"
					}, {
						title: "1000~1500元每月"
					}, {
						title: "1500~2000元每月"
					}, {
						title: "2000~3000元每月"
					}, {
						title: "3000~5000元每月"
					}, {
						title: "5000~10000元每月"
					}, {
						title: "一万以上每月"
					}];
					plus.nativeUI.actionSheet({
						title: "期望月薪",
						cancel: "取消",
						buttons: btnArray
					}, function(e) {
						var index = e.index;
						var text = "";
						switch (index) {
							case 0:
								break;
							case 1:
								text += "面议";
								break;
							case 2:
								text += "1000~1500元每月";
								break;
							case 3:
								text += "1500~2000元每月";
								break;
							case 4:
								text += "2000~3000元每月";
								break;
							case 5:
								text += "3000~5000元每月";
								break;
							case 6:
								text += "5000~10000元每月";
								break;
							case 7:
								text += "一万以上每月";
								break;
						}
						document.getElementById("yuexin").getElementsByTagName('input')[0].value = text;
					});
				});
				//-------------------------------------------------------------------------------------------
				var cityPicker3 = new $.PopPicker({
					layer: 3
				});
				cityPicker3.setData(cityData3);
				document.getElementById("diqu").addEventListener('tap', function(event) {
					cityPicker3.show(function(items) {
						document.getElementById("diqu").getElementsByTagName('input')[0].value = (items[0] || {}).text + " " + (items[1] || {}).text + " " + (items[2] || {}).text;
						//返回 false 可以阻止选择框的关闭 
						//return false;
					});
				}, false);
				//--------------------------------------------------------------------------
				var cityPicker2 = new $.PopPicker({
					layer: 1
				});
				cityPicker2.setData(zhiweiData);
				var zhiwei = doc.getElementById('zhiwei');
				var cityResult3 = doc.getElementById('cityResult3');
				zhiwei.addEventListener('tap', function(event) {
					cityPicker2.show(function(items) {
						//							hangwei.innerText
						//返回 false 可以阻止选择框的关闭
						if ((items[0] || {}).children) {
							cityPicker2.setData((items[0] || {}).children)
							return false
						} else {
							zhiwei.getElementsByTagName('input')[0].value = (items[0] || {}).text + " ";
							jobtype = (items[0] || {}).value
							alert(window.jobtype);
						}
						cityPicker2.setData(zhiweiData);
					});
				}, false);
				//--------------------------------------------------------
				document.getElementById('reg1').addEventListener('tap', function() {
					if (/^\s*$/.test(v('yixiang')) || /^\s*$/.test(v('HopeType')) || /^\s*$/.test(v('HopeZone')) || /^\s*$/.test(v('HopeMonthFee'))) {
						alert("有未填写的必填项！");
						return
					}
					var mengban = document.getElementById("mengban");
					mengban.style.display = 'block';
					this.disabled = true;
					this.innerHTML = "正在提交";
					var resumeInfo = plus.webview.currentWebview();
					var data = {
						t: 7,
						id: resumeInfo.id,
						RecuetlyPost: v('RecuetlyPost'),
						HopeType: v('HopeType'),
						HopeZone: v('HopeZone'),
						HopeMonthFee: v('HopeMonthFee'),
						zhiwei: window.jobtype //待修改！！！！！
					}
					jp("http://www.511rcw.com/app/AppHandler.ashx", data, function(JSONdata) {
						mengban.style.display = 'none';
						if (JSONdata != 0) {
							alert("出现错误！");
						} else {
							this.disabled = false;
							this.innerHTML = "保存并下一步";
							var extrasId = resumeInfo.id;
							console.log(extrasId);
							mui.openWindow({
								url: 'jianli-3.html',
								id: resumeInfo.id + '-2',
								extras: extrasId
							})
						}
						var data = {
							t: 8,
							id: resumeInfo.id,
							ContentsSkill: v('ContentsSkill')
						}
						console.log(data.RecuetlyPost)
						jp("http://www.511rcw.com/app/AppHandler.ashx", data, function(JSONdata) {
							if (JSONdata != 0) {
								alert("出现错误！");
							}
						});
					});

					function v(ele) {
						return document.getElementById(ele).value;
					}
				})
				$.plusReady(function() {
					var resumeInfo = plus.webview.currentWebview();
					var data = {
						t: 4,
						id: resumeInfo.Memid,
						i: resumeInfo.rows
					}
					jp("http://www.511rcw.com/app/AppHandler.ashx", data, function(JSONdata) {
						var arr = JSONdata.split('|$|');
						for (var i = 0; i < arr.length; i++) {
							if (typeof arr[i] == undefined) arr[i] = '未填写';
						}
						document.getElementById("RecuetlyPost").value = arr[15];
						document.getElementById("HopeType").value = arr[16];
						document.getElementById("HopeZone").value = arr[17];
						document.getElementById("HopeMonthFee").value = arr[18];
						document.getElementById("yixiang").value = arr[21];
						document.getElementById("ContentsSkill").value = arr[20];
						window.jobtype = arr[39];
					});
				})
			})(mui, document);
		</script>
	</body>

</html>