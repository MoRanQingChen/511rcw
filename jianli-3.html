<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<link href="css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="css/job.css" />
		<link href="css/mui.picker.css" rel="stylesheet" />
		<link href="css/mui.poppicker.css" rel="stylesheet" />
		<style>
			ul {
				font-size: 14px;
				color: #8f8f94;
			}
			
			.mui-btn {
				padding: 10px;
				http: //127.0.0.1:8020/app/main.html#
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav" style="padding-right: 15px;">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">我的简历</h1>
		</header>
		<div class="mui-content">
			<br /> 三：教育经历
			<br />
			<br />
			<form class="mui-input-group" style="margin-bottom: 20px;">
				<div class="mui-input-row" id="ruxue">
					<label>开始日期<span style="color: red;">*</span>：</label>
					<input type="text" placeholder="选择入学日期" id="startDate">
				</div>
				<div class="mui-input-row" id="biye">
					<label>结束日期<span style="color: red;">*</span>：</label>
					<input type="text" placeholder="选择毕业日期" id="endDate">
				</div>
				<div class="mui-input-row">
					<label>学校名称<span style="color: red;">*</span>：</label>
					<input type="text" placeholder="输入学校名称" id="Title">
				</div>
				<div class="mui-input-row">
					<label>专业名称<span style="color: red;">*</span>：</label>
					<input type="text" placeholder="输入所学专业" id="Remark1">
				</div>
				<div class="mui-input-row" id="xueli">
					<label>最高学历<span style="color: red;">*</span>：</label>
					<input type="text" placeholder="请选择学历" id="Remark2">
				</div>
			</form>
			<!--			<button class="mui-btn mui-btn-primary" onclick="return false;" style="float: left; margin-left: 20px;height: 35px;line-height: 15px;">继续添加经历</button>
--><button id="reg1" class="mui-btn mui-btn-primary" style="float: right; margin-right: 20px;height: 35px;line-height: 15px;">保存并下一步</button>&nbsp;&nbsp;

		</div>
		<script src="js/mui.min.js "></script>
		<script src="js/app.js "></script>
		<script src="js/city.data-3.js" type="text/javascript" charset="utf-8"></script>
		<script src="./js/mui.picker.js"></script>
		<script src="./js/mui.poppicker.js"></script>
		<script src="js/ajax.js" type="text/javascript" charset="utf-8"></script>

		<!--<script src="../js/mui.picker.min.js"></script>-->

		<script>
			(function($, doc) {
				$.init();
				mui('body').on('shown', '.mui-popover', function(e) {
					//console.log('shown', e.detail.id);//detail为当前popover元素
				});
				mui('body').on('hidden', '.mui-popover', function(e) {
					//console.log('hidden', e.detail.id);//detail为当前popover元素
				});
				//-------------------------------------------------------------------------------------------
				document.getElementById("xueli").addEventListener('tap', function() {
					var btnArray = [{
						title: "初中"
					}, {
						title: "高中"
					}, {
						title: "中技"
					}, {
						title: "中专"
					}, {
						title: "大专"
					}, {
						title: "本科"
					}, {
						title: "硕士"
					}, {
						title: "博士"
					}];
					plus.nativeUI.actionSheet({
						title: "学历",
						cancel: "取消",
						buttons: btnArray
					}, function(e) {
						var index = e.index;
						var text = "";
						switch (index) {
							case 0:
								break;
							case 1:
								text += "初中";
								break;
							case 2:
								text += "高中";
								break;
							case 3:
								text += "中技";
								break;
							case 4:
								text += "中专";
								break;
							case 5:
								text += "大专";
								break;
							case 6:
								text += "本科";
								break;
							case 7:
								text += "硕士";
								break;
							case 8:
								text += "博士";
								break;
						}
						document.getElementById("xueli").getElementsByTagName('input')[0].value = text;
					});
				});
				//-------------------------------------------------------------------------------------------
				document.getElementById("ruxue").addEventListener('tap', function() {
					var dDate = new Date();
					dDate.setFullYear(dDate.getFullYear() - 4, 7, 1);
					var minDate = new Date();
					minDate.setFullYear(1940, 0, 1);
					var maxDate = new Date();
					maxDate.setFullYear(maxDate.getFullYear(), maxDate.getMonth(), maxDate.getDate());
					plus.nativeUI.pickDate(function(e) {
						var d = e.date;
						document.getElementById("ruxue").getElementsByTagName('input')[0].value = d.getFullYear() + "-" + (d.getMonth() + 1) + "-" + d.getDate();
					}, function(e) {
						document.getElementById("ruxue").getElementsByTagName('input')[0].value = ""
					}, {
						title: "请选择日期",
						date: dDate,
						minDate: minDate,
						maxDate: maxDate
					});
				})
				document.getElementById("biye").addEventListener('tap', function() {
						var dDate = new Date();
						dDate.setFullYear(dDate.getFullYear(), 9, 1);
						var minDate = new Date();
						minDate.setFullYear(1940, 0, 1);
						var maxDate = new Date();
						maxDate.setFullYear(maxDate.getFullYear() + 4, maxDate.getMonth(), maxDate.getDate());
						plus.nativeUI.pickDate(function(e) {
							var d = e.date;
							document.getElementById("biye").getElementsByTagName('input')[0].value = d.getFullYear() + "-" + (d.getMonth() + 1) + "-" + d.getDate();
						}, function(e) {
							document.getElementById("biye").getElementsByTagName('input')[0].value = ""
						}, {
							title: "请选择日期",
							date: dDate,
							minDate: minDate,
							maxDate: maxDate
						});
					})
					//----------------------------------------------------------------------
				/*				var resumeInfo;
								$.plusReady(function() {
									resumeInfo = plus.webview.currentWebview();
													var data = {
									t: 15,
									resumeID: resumeInfo.id.substring(0, resumeInfo.id.length - 2)
								}

								jp("http://www.511rcw.com/app/AppHandler.ashx", data, function(JSONdata) {
										var arr = JSONdata.split('|$|');
										if (arr[5]) {
											document.getElementById("startDate").value = arr[1];
											document.getElementById("endDate").value = arr[2];
											document.getElementById("Title").value = arr[3];
											document.getElementById("Remark1").value = arr[4];
											document.getElementById("Remark2").value = arr[5];
										}
									})
								})*/
				$.plusReady(function() {
					resumeInfo = plus.webview.currentWebview();
					var data = {
						t: 15,
						resumeID: resumeInfo.id.substring(0, resumeInfo.id.length - 2)
					}
					jp("http://www.511rcw.com/app/AppHandler.ashx", data, function(JSONdata) {
						var arr = JSONdata.split('|$|');
						if (arr[0]) {
							document.getElementById("startDate").value = arr[1];
							document.getElementById("endDate").value = arr[2];
							document.getElementById("Title").value = arr[3];
							document.getElementById("Remark1").value = arr[4];
							document.getElementById("Remark2").value = arr[5];
						}
					})
				});
				//-------------------------------------------------------
				document.getElementById('reg1').addEventListener('tap',function() {
					if (/^\s*$/.test(v('startDate')) || /^\s*$/.test(v('endDate')) || /^\s*$/.test(v('Title')) || /^\s*$/.test(v('Remark1')) || /^\s*$/.test(v('Remark2'))) {
						alert("有未填写的必填项！");
						return
					}
											this.disabled=true;
						this.innerHTML="正在提交";
					var data = {
						t: 9,
						id: resumeInfo.id.substring(0, resumeInfo.id.length - 2),
						startDate: v('startDate'),
						endDate: v('endDate'),
						Title: v('Title'),
						Remark1: v('Remark1'),
						Remark2: v('Remark2')
					}
					console.log(data.RecuetlyPost)
					jp("http://www.511rcw.com/app/AppHandler.ashx", data, function(JSONdata) {
						if (JSONdata != 0) {
							alert("出现错误！");
						} else {
										                    this.disabled=false;
						this.innerHTML="保存并下一步";
							var extrasId = resumeInfo.id;
							mui.openWindow({
								url: 'jianli-4.html',
								id: resumeInfo.id + '-3',
								extras: extrasId
							})
						}
					});

					function v(ele) {
						return document.getElementById(ele).value;
					}
				};
				)
				 //-------------------------------------------------------------
				/*				!(function() {

								})()*/
			}(mui, document));
		</script>

	</body>

</html>