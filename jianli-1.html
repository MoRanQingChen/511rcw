<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<link href="css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="css/job.css" />
		<link href="css/mui.picker.css" rel="stylesheet" />
		<link href="css/mui.poppicker.css" rel="stylesheet" />
		<style>
			ul {
				font-size: 14px;
				color: #8f8f94;
			}
			
			.mui-btn {
				padding: 10px;
				http: //127.0.0.1:8020/app/main.html#
			}
			
			#mengban {
				width: 100%;
				height: 100%;
				background-color: rgba(0, 0, 0, .2);
				position: fixed;
				z-index: 998;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav" style="padding-right: 15px;">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">我的简历</h1>
		</header>
		<div id="mengban" style="display: none;">

		</div>
		<div class="mui-content">
			<br /> 一：基本信息
			<br />
			<br />
			<form class="mui-input-group">
				<div class="mui-input-row">
					<label>简历名称<span style="color: red;">*</span>：</label>
					<input type="text" placeholder="简历名" id="title">
				</div>
				<div class="mui-input-row">
					<label>真实姓名<span style="color: red;">*</span>：</label>
					<input type="text" placeholder="真实姓名" id="RealName">
				</div>
				<div class="mui-input-row" id="xingbie">
					<label>性别：</label>
					<input type="text" placeholder="请选择性别" id="sex">
				</div>
				<div class="mui-input-row mui-input-range field-contain">
					<div style="float:left">
						<label style="width: 90px;">年龄：</label>
						<input type="text" id='fieldnianling-range-input' value='25' style="width: 50px;">
					</div>
					<div style="margin-left:141px;">
						<input type="range" id='fieldnianling-range' value="25" min="16" max="80" />
					</div>
				</div>
				<div class="mui-input-row mui-input-range field-contain">
					<div style="float:left">
						<label style="width: 90px;">身高：</label>
						<input type="text" id='fieldshengao-range-input' value='170' style="width: 50px;">
					</div>
					<div style="margin-left:141px;">
						<input type="range" id='fieldshengao-range' value="170" min="50" max="300" id="Height111" />
					</div>
				</div>
				<div id="hunyin" class="mui-input-row">
					<label>婚姻状况：</label>
					<input type="text" placeholder="请选择婚姻状况" id="hunyan">
				</div>
				<div id="jingyan" class="mui-input-row">
					<label>工作经验<span style="color: red;">*</span>：</label>
					<input type="text" placeholder="请选择工作经验" id="gz">
				</div>
				<div id="hukou" class="mui-input-row">
					<label>户口地址<span style="color: red;">*</span>：</label>
					<input type="text" placeholder="请选择户口地址" / id="NativePlace">
				</div>
				<div id="xueli" class="mui-input-row">
					<label>学历<span style="color: red;">*</span>：</label>
					<input type="text" placeholder="请选择学历信息" id="EducationLevel">
				</div>
				<div class="mui-input-row">
					<label>联系电话<span style="color: red;">*</span>：</label>
					<input type="text" placeholder="手机或电话" id="LinkMobile">
				</div>
				<div class="mui-input-row">
					<label>电子邮箱<span style="color: red;">*</span>：</label>
					<input type="email" placeholder="电子邮箱" id="Email">
				</div>
				<div id="tongxun" class="mui-input-row">
					<label>通讯地址<span style="color: red;">*</span>：</label>
					<input type="text" placeholder="请选择通讯地址" id="TongxunAddress">
				</div>
				<div class="mui-input-row">
					<label>联系QQ：</label>
					<input type="text" placeholder="联系QQ" id="LinkQQ">
				</div>
			</form>
			<div class="mui-button-row">
				<button id="reg1" class="mui-btn mui-btn-primary" style="float: right; margin-right: 20px;height: 35px;line-height: 15px;">保存并下一步</button>&nbsp;&nbsp;
			</div>

		</div>
		<script src="js/mui.min.js "></script>
		<script src="js/app.js "></script>
		<script src="js/city.data-3.js" type="text/javascript" charset="utf-8"></script>
		<script src="./js/mui.picker.js"></script>
		<script src="./js/mui.poppicker.js"></script>
		<script src="js/ajax.js" type="text/javascript" charset="utf-8"></script>

		<!--<script src="../js/mui.picker.min.js"></script>-->

		<script>
			(function($, doc) {
				$.init();
				mui('body').on('shown', '.mui-popover', function(e) {
					//console.log('shown', e.detail.id);//detail为当前popover元素
				});
				mui('body').on('hidden', '.mui-popover', function(e) {
					//console.log('hidden', e.detail.id);//detail为当前popover元素
				});
				//-------------------------------------------------------------------------------------------
				var rangeList = document.querySelectorAll('input[type="range"]');
				for (var i = 0, len = rangeList.length; i < len; i++) {
					rangeList[i].addEventListener('input', function() {
						if (this.id.indexOf('field') >= 0) {
							document.getElementById(this.id + '-input').value = this.value;
						} else {
							document.getElementById(this.id + '-val').innerHTML = this.value;
						}
					});
				}
				document.getElementById('fieldnianling-range-input').addEventListener('input', function() {
					document.getElementById('fieldnianling-range').value = this.value;
				});
				document.getElementById('fieldshengao-range-input').addEventListener('input', function() {
					document.getElementById('fieldshengao-range').value = this.value;
				});
				//----------------------------------------------------------------------------------------
				document.getElementById("xingbie").addEventListener('tap', function() {
					var btnArray = [{
						title: "男性"
					}, {
						title: "女性"
					}];
					plus.nativeUI.actionSheet({
						title: "性别",
						cancel: "取消",
						buttons: btnArray
					}, function(e) {
						var index = e.index;
						var text = "";
						switch (index) {
							case 0:
								break;
							case 1:
								text += "男性";
								break;
							case 2:
								text += "女性";
								break;
						}
						document.getElementById("xingbie").getElementsByTagName('input')[0].value = text;
					});
				});
				document.getElementById("hunyin").addEventListener('tap', function() {
					var btnArray = [{
						title: "已婚"
					}, {
						title: "未婚"
					}, {
						title: "保密"
					}];
					plus.nativeUI.actionSheet({
						title: "婚姻状况",
						cancel: "取消",
						buttons: btnArray
					}, function(e) {
						var index = e.index;
						var text = "";
						switch (index) {
							case 0:
								break;
							case 1:
								text += "已婚";
								break;
							case 2:
								text += "未婚";
								break;
							case 3:
								text += "保密";
								break;
						}
						document.getElementById("hunyin").getElementsByTagName('input')[0].value = text;
					});
				});
				document.getElementById("jingyan").addEventListener('tap', function() {
					var btnArray = [{
						title: "无经验"
					}, {
						title: "1年以下"
					}, {
						title: "1-3年"
					}, {
						title: "3-5年"
					}, {
						title: "5-10年"
					}, {
						title: "10年以上"
					}];
					plus.nativeUI.actionSheet({
						title: "工作经验",
						cancel: "取消",
						buttons: btnArray
					}, function(e) {
						var index = e.index;
						var text = "";
						switch (index) {
							case 0:
								break;
							case 1:
								text += "无经验";
								break;
							case 2:
								text += "1年以下";
								break;
							case 3:
								text += "1-3年";
								break;
							case 4:
								text += "3-5年";
								break;
							case 5:
								text += "5-10年";
								break;
							case 6:
								text += "10年以上";
								break;
						}
						document.getElementById("jingyan").getElementsByTagName('input')[0].value = text;
					});
				});
				document.getElementById("xueli").addEventListener('tap', function() {
					var btnArray = [{
						title: "初中"
					}, {
						title: "高中"
					}, {
						title: "中技"
					}, {
						title: "中专"
					}, {
						title: "大专"
					}, {
						title: "本科"
					}, {
						title: "硕士"
					}, {
						title: "博士"
					}];
					plus.nativeUI.actionSheet({
						title: "学历",
						cancel: "取消",
						buttons: btnArray
					}, function(e) {
						var index = e.index;
						var text = "";
						switch (index) {
							case 0:
								break;
							case 1:
								text += "初中";
								break;
							case 2:
								text += "高中";
								break;
							case 3:
								text += "中技";
								break;
							case 4:
								text += "中专";
								break;
							case 5:
								text += "大专";
								break;
							case 6:
								text += "本科";
								break;
							case 7:
								text += "硕士";
								break;
							case 8:
								text += "博士";
								break;
						}
						document.getElementById("xueli").getElementsByTagName('input')[0].value = text;
					});
				});
				//-------------------------------------------------------------------------------------------
				var cityPicker3 = new $.PopPicker({
					layer: 3
				});
				cityPicker3.setData(cityData3);
				hukou.addEventListener('tap', function(event) {
					cityPicker3.show(function(items) {
						document.getElementById("hukou").getElementsByTagName('input')[0].value = (items[0] || {}).text + " " + (items[1] || {}).text + " " + (items[2] || {}).text;
						//返回 false 可以阻止选择框的关闭 
						//return false;
					});
				}, false);
				tongxun.addEventListener('tap', function(event) {
					cityPicker3.show(function(items) {
						document.getElementById("tongxun").getElementsByTagName('input')[0].value = (items[0] || {}).text + " " + (items[1] || {}).text + " " + (items[2] || {}).text;
						//返回 false 可以阻止选择框的关闭 
						//return false;
					});
				}, false);
				//-----------------------------------------------------------------------------------------------
				//
				mui.plusReady(function() {
					coo = plus.navigator.getCookie('id');
					var ResumeInfo = plus.webview.currentWebview();
					if (ResumeInfo.Memid) {
						var data = {
							t: 4,
							id: ResumeInfo.Memid,
							i: ResumeInfo.rows
						}
						jp("http://www.511rcw.com/app/AppHandler.ashx", data, function(JSONdata) {
							var arr = JSONdata.split('|$|');
							document.getElementById("title").value = arr[2];
							document.getElementById("RealName").value = arr[3];
							document.getElementById("sex").value = arr[4]
							document.getElementById("hunyan").value = arr[6]
							document.getElementById("gz").value = arr[7]
							document.getElementById("NativePlace").value = arr[8]
							document.getElementById("EducationLevel").value = arr[9]
							document.getElementById("LinkMobile").value = arr[10]
							document.getElementById("Email").value = arr[11]
							document.getElementById("TongxunAddress").value = arr[12]
							document.getElementById("LinkQQ").value = arr[13]
						});
					} //if (ResumeInfo.Memid) 
					document.getElementById('reg1').addEventListener('tap', function() {
							var mengban = document.getElementById("mengban");
							mengban.style.display = 'block';
							if (/^\s*$/.test(v('title')) || /^\s*$/.test(v('title')) || /^\s*$/.test(v('RealName')) || /^\s*$/.test(v('gz')) || /^\s*$/.test(v('NativePlace')) || /^\s*$/.test(v('EducationLevel')) || /^\s*$/.test(v('LinkMobile')) || /^\s*$/.test(v('Email')) || /^\s*$/.test(v('TongxunAddress'))) {
								alert("有未填写的必填项！");
								mengban.style.display = 'none';
								return
							}
							this.disabled = true;
							this.innerHTML = "正在提交";
							var resumeInfo = plus.webview.currentWebview();
							var data = {
								t: 6,
								id: isNaN(resumeInfo.id) ? 0 : resumeInfo.id,
								User: coo,
								title: v('title'),
								RealName: v('RealName'),
								sex: v('sex') == '男性' ? true : false,
								hunyan: v('hunyan') == '未婚' ? 0 : v('hunyan') == '已婚' ? 1 : 2,
								gz: v('gz'),
								NativePlace: v('NativePlace'),
								EducationLevel: v('EducationLevel'),
								LinkMobile: v('LinkMobile'),
								Email: v('Email'),
								TongxunAddress: v('TongxunAddress'),
								LinkQQ: v('LinkQQ'),
								Height: 1
							}
							jp("http://www.511rcw.com/app/AppHandler.ashx", data, function(JSONdata) {
								mengban.style.display = 'none'
								if (arguments[0] > 0) {
									alert("出现错误！");
								} else {
									this.disabled = false;
									this.innerHTML = "保存并下一步";
									var extrasId = arguments[0] * (-1);
									mui.openWindow({
										url: 'jianli-2.html',
										id: arguments[0] * (-1),
										extras: {
											Memid: ResumeInfo.Memid,
											rows: ResumeInfo.rows
										}
									})
								}
							});

							function v(ele) {
								console.log(document.getElementById(ele).value);
								return document.getElementById(ele).value;
							}
						})
						//-----------------------------------------------------------------------
				});
			}(mui, document));
		</script>

	</body>

</html>